{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#deployer-minio-avec-bootc","title":"D\u00e9ployer MinIO avec BootC","text":""},{"location":"#1-introduction","title":"1. Introduction","text":""},{"location":"#presentation-de-minio-et-bootc","title":"Pr\u00e9sentation de MinIO et BootC","text":"<p>MinIO est une solution de stockage d'objets open-source qui permet de cr\u00e9er des infrastructures de stockage \u00e9volutives et r\u00e9silientes. BootC, quant \u00e0 lui, est un outil de gestion de conteneurs qui facilite le d\u00e9ploiement et la gestion des applications conteneuris\u00e9es.</p>"},{"location":"#importance-du-stockage-dobjets-et-des-conteneurs","title":"Importance du stockage d'objets et des conteneurs","text":"<p>Le stockage d'objets est essentiel pour g\u00e9rer de grandes quantit\u00e9s de donn\u00e9es non structur\u00e9es, tandis que les conteneurs permettent de d\u00e9ployer des applications de mani\u00e8re coh\u00e9rente et isol\u00e9e. La combinaison de MinIO et BootC offre une solution puissante pour le stockage et la gestion des donn\u00e9es dans des environnements modernes.</p>"},{"location":"#2-quest-ce-que-minio","title":"2. Qu'est-ce que MinIO ?","text":""},{"location":"#description-de-minio","title":"Description de MinIO","text":"<p>MinIO est un serveur de stockage d'objets compatible avec le protocole Amazon S3. Il est con\u00e7u pour \u00eatre l\u00e9ger, rapide et facile \u00e0 d\u00e9ployer. MinIO peut \u00eatre utilis\u00e9 pour stocker des photos, des vid\u00e9os, des sauvegardes et d'autres types de donn\u00e9es non structur\u00e9es.</p>"},{"location":"#avantages-et-caracteristiques-principales","title":"Avantages et caract\u00e9ristiques principales","text":"<ul> <li>Compatibilit\u00e9 S3 : MinIO est enti\u00e8rement compatible avec le protocole Amazon S3, ce qui permet une int\u00e9gration facile avec les outils et applications existants.</li> <li>Haute performance : MinIO est optimis\u00e9 pour offrir des performances \u00e9lev\u00e9es en termes de d\u00e9bit et de latence.</li> <li>\u00c9volutivit\u00e9 : MinIO peut \u00eatre d\u00e9ploy\u00e9 sur un seul n\u0153ud ou sur plusieurs n\u0153uds pour r\u00e9pondre aux besoins de stockage croissants.</li> <li>S\u00e9curit\u00e9 : MinIO offre des fonctionnalit\u00e9s de s\u00e9curit\u00e9 robustes, telles que le chiffrement des donn\u00e9es et l'authentification.</li> </ul>"},{"location":"#3-quest-ce-que-bootc","title":"3. Qu'est-ce que BootC ?","text":""},{"location":"#description-de-bootc","title":"Description de BootC","text":"<p>BootC est un outil de gestion de conteneurs qui simplifie le d\u00e9ploiement, la gestion et l'orchestration des applications conteneuris\u00e9es. Il est con\u00e7u pour \u00eatre l\u00e9ger et facile \u00e0 utiliser, tout en offrant des fonctionnalit\u00e9s puissantes pour les environnements de production. BootC est au c\u0153ur des conteneurs amor\u00e7ables, qui permettent de g\u00e9rer des syst\u00e8mes d'exploitation immuables via des images de conteneurs OCI/Docker.</p>"},{"location":"#avantages-et-caracteristiques-principales_1","title":"Avantages et caract\u00e9ristiques principales","text":"<ul> <li>Approche unifi\u00e9e pour DevOps : BootC permet de g\u00e9rer l'ensemble du syst\u00e8me d'exploitation via des outils et concepts bas\u00e9s sur les conteneurs, y compris GitOps et CI/CD.</li> <li>S\u00e9curit\u00e9 simplifi\u00e9e : Les mises \u00e0 jour de s\u00e9curit\u00e9 peuvent \u00eatre appliqu\u00e9es \u00e0 l'ensemble du syst\u00e8me d'exploitation, y compris le noyau, les pilotes et le chargeur d'amor\u00e7age, en utilisant des outils de s\u00e9curit\u00e9 avanc\u00e9s pour les conteneurs.</li> <li>Int\u00e9gration rapide et \u00e9cosyst\u00e8me : BootC s'int\u00e8gre dans un vaste \u00e9cosyst\u00e8me d'outils et de technologies autour des conteneurs, permettant de d\u00e9ployer et de g\u00e9rer des syst\u00e8mes Linux \u00e0 grande \u00e9chelle.</li> </ul>"},{"location":"#4-prerequis","title":"4. Pr\u00e9requis","text":""},{"location":"#liste-des-elements-necessaires-avant-de-commencer","title":"Liste des \u00e9l\u00e9ments n\u00e9cessaires avant de commencer","text":"<ul> <li>Podman install\u00e9 sur votre syst\u00e8me</li> <li>Espace disque suffisant pour le stockage des conteneurs et des fichiers de sortie</li> </ul>"},{"location":"#5-etapes-de-deploiement","title":"5. \u00c9tapes de d\u00e9ploiement","text":""},{"location":"#etape-1-creer-le-containerfile","title":"\u00c9tape 1 : Cr\u00e9er le <code>Containerfile</code>","text":"<p>Adaptez le <code>Containerfile</code> suivant \u00e0 vos besoins :</p> <pre><code>FROM quay.io/centos/centos:stream9 as builder\n\nRUN dnf install -y wget\nRUN wget https://dl.min.io/server/minio/release/linux-amd64/minio\n\nFROM quay.io/centos-bootc/centos-bootc:stream9\n\nCOPY --from=builder --chmod=755 /minio /usr/local/bin/minio\n\nRUN cat &lt;&lt;'EOF' &gt; /etc/systemd/system/minio.service\n[Unit]\nDescription=MinIO\nDocumentation=https://min.io/docs/minio/linux/index.html\nWants=network-online.target\nAfter=network-online.target\nAssertFileIsExecutable=/usr/local/bin/minio\n\n[Service]\nWorkingDirectory=/usr/local\n\nUser=minio\nGroup=minio\nProtectProc=invisible\n\nEnvironmentFile=-/etc/default/minio\nExecStartPre=/bin/bash -c \"if [ -z \\\"$MINIO_VOLUMES\\\" ]; then echo \\\"Variable MINIO_VOLUMES not set in /etc/default/minio\\\"; exit 1; fi\"\nExecStart=/usr/local/bin/minio server $MINIO_OPTS $MINIO_VOLUMES\n\n# MinIO RELEASE.2023-05-04T21-44-30Z adds support for Type=notify (https://www.freedesktop.org/software/systemd/man/systemd.service.html#Type=)\n# This may improve systemctl setups where other services use `After=minio.server`\n# Uncomment the line to enable the functionality\n# Type=notify\n\n# Let systemd restart this service always\nRestart=always\n\n# Specifies the maximum file descriptor number that can be opened by this process\nLimitNOFILE=65536\n\n# Specifies the maximum number of threads this process can create\nTasksMax=infinity\n\n# Disable timeout logic and wait until process is stopped\nTimeoutStopSec=infinity\nSendSIGKILL=no\n\n[Install]\nWantedBy=multi-user.target\n\nEOF\n\nRUN cat &lt;&lt;'EOF' &gt; /etc/default/minio\n# MINIO_ROOT_USER and MINIO_ROOT_PASSWORD sets the root account for the MinIO server.\n# This user has unrestricted permissions to perform S3 and administrative API operations on any resource in the deployment.\n# Omit to use the default values 'minioadmin:minioadmin'.\n# MinIO recommends setting non-default values as a best practice, regardless of environment\n\nMINIO_ROOT_USER=minioadmin\nMINIO_ROOT_PASSWORD=minioadmin\n\n# MINIO_VOLUMES sets the storage volume or path to use for the MinIO server.\n\nMINIO_VOLUMES=\"/home/minio\"\n\n# MINIO_OPTS sets any additional commandline options to pass to the MinIO server.\n# For example, `--console-address :9001` sets the MinIO Console listen port\nMINIO_OPTS=\"--console-address :9001\"\nEOF\n\nWORKDIR /home\n\nRUN mkdir minio\n\nRUN systemctl enable minio.service\n</code></pre>"},{"location":"#etape-2-creer-le-fichier-configtoml","title":"\u00c9tape 2 : Cr\u00e9er le fichier <code>config.toml</code>","text":"<p>Adaptez le fichier <code>config.toml</code> suivant \u00e0 vos besoins : </p> <pre><code>[customizations.installer.kickstart]\ncontents = \"\"\"\n# Non-interactive text mode installation\ntext --non-interactive\nreboot --eject\n\n# Set language and keyboard layout\nlang en_US\nkeyboard --vckeymap=fr --xlayouts='fr'\n\n# Network configuration\nnetwork --bootproto=dhcp --device=link --activate --onboot=on\n\nzerombr\nclearpart --all --initlabel --disklabel=gpt\nautopart --noswap --type=lvm --fstype=xfs \n\n# Create a user with SSH key\nuser --name=minio --password=toto --shell=/bin/bash --groups=wheel\n\n%post\n# Configure sudo for the user\necho \"minio ALL=(ALL) NOPASSWD: ALL\" &gt; /etc/sudoers.d/minio\nchmod 440 /etc/sudoers.d/minio\n%end\n\"\"\"\n</code></pre>"},{"location":"#etape-3-construire-limage-bootc-locale-pour-minio","title":"\u00c9tape 3 : Construire l'image Bootc locale pour MinIO","text":"<ol> <li>D\u00e9finissez vos identifiants Red Hat et le nom de l'image :</li> </ol> <p><code>bash    export IMAGE_NAME=minio-centos-bootc</code></p> <ol> <li>Ex\u00e9cutez la commande <code>podman build</code> pour cr\u00e9er l'image Bootc pour MinIO :</li> </ol> <p><code>bash    sudo podman build -t \"${IMAGE_NAME}\" -f Containerfile</code></p> <p>Remarque : Le <code>Containerfile</code> doit \u00eatre pr\u00e9sent dans le r\u00e9pertoire de travail.</p>"},{"location":"#etape-4-creer-liso-pour-minio","title":"\u00c9tape 4 : Cr\u00e9er l'ISO pour MinIO","text":"<ol> <li>D\u00e9finissez les variables n\u00e9cessaires :</li> </ol> <p><code>bash    export CONFIG_PATH=&lt;votre_chemin&gt;/config.toml    export OUTPUT_DIR=&lt;chemin_vers_r\u00e9pertoire_de_sortie&gt;</code></p> <ol> <li>Ex\u00e9cutez la commande <code>podman run</code> pour g\u00e9n\u00e9rer l'ISO :</li> </ol> <p><code>bash    sudo podman run \\        --rm \\        -it \\        --privileged \\        --pull=newer \\        --security-opt label=type:unconfined_t \\        -v ${CONFIG_PATH}:/config.toml:ro \\        -v ${OUTPUT_DIR}:/output \\        -v /var/lib/containers/storage:/var/lib/containers/storage \\        quay.io/centos-bootc/bootc-image-builder \\        --type iso \\        --use-librepo \\        --local localhost/${IMAGE_NAME}</code></p> <p>Remarques :    - Assurez-vous que <code>config.toml</code> est correctement configur\u00e9 pour votre installation MinIO.    - Le r\u00e9pertoire de sortie doit \u00eatre accessible en \u00e9criture pour stocker l'ISO r\u00e9sultant.    - L'option <code>--pull=newer</code> garantit l'utilisation de la derni\u00e8re image <code>bootc-image-builder</code>.    - L'option <code>--security-opt label=type:unconfined_t</code> aide \u00e0 \u00e9viter les probl\u00e8mes li\u00e9s \u00e0 SELinux.</p>"},{"location":"#etape-5-installer-centos-stream-9-avec-minio","title":"\u00c9tape 5 : Installer CentOS Stream 9 avec MinIO","text":"<ol> <li> <p>Cr\u00e9er un support d'installation amor\u00e7able : Utilisez l'ISO g\u00e9n\u00e9r\u00e9 pour cr\u00e9er un support d'installation amor\u00e7able (par exemple, une cl\u00e9 USB) \u00e0 l'aide d'un outil comme Rufus (Windows) ou dd (Linux).</p> </li> <li> <p>D\u00e9marrer \u00e0 partir du support : Ins\u00e9rez le support d'installation dans votre syst\u00e8me cible et d\u00e9marrez \u00e0 partir de celui-ci.</p> </li> <li> <p>Suivre les instructions d'installation : Proc\u00e9dez \u00e0 l'installation en suivant les instructions \u00e0 l'\u00e9cran.</p> </li> <li> <p>V\u00e9rifier l'installation : Une fois l'installation termin\u00e9e, v\u00e9rifiez que MinIO est en cours d'ex\u00e9cution en contr\u00f4lant l'\u00e9tat du service :</p> </li> </ol> <p><code>bash    sudo systemctl status MinIO</code></p>"},{"location":"#6-configuration-avancee-optionnel","title":"6. Configuration avanc\u00e9e (optionnel)","text":""},{"location":"#options-de-configuration-supplementaires","title":"Options de configuration suppl\u00e9mentaires","text":"<ul> <li>R\u00e9plication : Configurez la r\u00e9plication des donn\u00e9es entre plusieurs n\u0153uds MinIO pour une meilleure r\u00e9silience.</li> <li>S\u00e9curit\u00e9 : Activez le chiffrement des donn\u00e9es et configurez les politiques de s\u00e9curit\u00e9 pour prot\u00e9ger vos donn\u00e9es.</li> </ul>"},{"location":"#securite-et-optimisation","title":"S\u00e9curit\u00e9 et optimisation","text":"<ul> <li>Sauvegarde : Mettez en place des sauvegardes r\u00e9guli\u00e8res pour prot\u00e9ger vos donn\u00e9es contre les pertes.</li> <li>Surveillance : Utilisez des outils de surveillance pour suivre les performances et la sant\u00e9 de votre d\u00e9ploiement MinIO.</li> </ul>"},{"location":"#7-conclusion","title":"7. Conclusion","text":""},{"location":"#recapitulatif-des-avantages-de-minio-et-bootc","title":"R\u00e9capitulatif des avantages de MinIO et BootC","text":"<p>MinIO et BootC offrent une solution puissante et flexible pour le stockage et la gestion des donn\u00e9es dans des environnements modernes. La combinaison de ces deux outils permet de cr\u00e9er des infrastructures de stockage \u00e9volutives, s\u00e9curis\u00e9es et faciles \u00e0 g\u00e9rer.</p>"},{"location":"#8-ressources-supplementaires","title":"8. Ressources suppl\u00e9mentaires","text":""},{"location":"#liens-vers-les-documentations","title":"Liens vers les documentations","text":"<ul> <li>Documentation de MinIO</li> <li>Documentation de BootC</li> <li>Documentation d'OSBuild</li> </ul> <p>Auteur : Romain GASQUET</p>"}]}